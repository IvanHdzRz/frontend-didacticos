[{"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/index.js":"1","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/App.js":"2","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/reportWebVitals.js":"3","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/views/FormNewDidactico.js":"4","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/InputText.js":"5","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/SeccionTitle.js":"6","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/Select.js":"7","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/DropZone.js":"8","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/WarningLabel.js":"9","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/SubmitButton.js":"10","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/PdfPreviewer.js":"11","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/Label.js":"12","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/helper/validationSchemas/schemaDidactico.js":"13","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/WarningIcon.js":"14","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/helper/fileToBufferArray.js":"15","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/Button.js":"16","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/hooks/useCounter.js":"17"},{"size":500,"mtime":1617993504923,"results":"18","hashOfConfig":"19"},{"size":145,"mtime":1617993504923,"results":"20","hashOfConfig":"19"},{"size":362,"mtime":1617993504923,"results":"21","hashOfConfig":"19"},{"size":4513,"mtime":1618533682867,"results":"22","hashOfConfig":"19"},{"size":999,"mtime":1617993504923,"results":"23","hashOfConfig":"19"},{"size":191,"mtime":1617993504923,"results":"24","hashOfConfig":"19"},{"size":1436,"mtime":1617993504923,"results":"25","hashOfConfig":"19"},{"size":2616,"mtime":1617993504923,"results":"26","hashOfConfig":"19"},{"size":288,"mtime":1617993504923,"results":"27","hashOfConfig":"19"},{"size":643,"mtime":1618257135557,"results":"28","hashOfConfig":"19"},{"size":6583,"mtime":1618089215836,"results":"29","hashOfConfig":"19"},{"size":256,"mtime":1617993504923,"results":"30","hashOfConfig":"19"},{"size":805,"mtime":1618088761647,"results":"31","hashOfConfig":"19"},{"size":222,"mtime":1617993504923,"results":"32","hashOfConfig":"19"},{"size":373,"mtime":1617993504923,"results":"33","hashOfConfig":"19"},{"size":310,"mtime":1617993504923,"results":"34","hashOfConfig":"19"},{"size":1099,"mtime":1617993504923,"results":"35","hashOfConfig":"19"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},"1fhon98",{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59","usedDeprecatedRules":"38"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/index.js",[],["72","73"],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/App.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/reportWebVitals.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/views/FormNewDidactico.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/InputText.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/SeccionTitle.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/Select.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/DropZone.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/WarningLabel.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/SubmitButton.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/PdfPreviewer.js",["74"],"import React, {useEffect,  useRef,  useState } from 'react'\nimport * as pdfjsLib from \"pdfjs-dist/build/pdf\";\nimport pdfjsWorker from \"pdfjs-dist/build/pdf.worker.entry\";\nimport { fileToBufferArray } from '../helper/fileToBufferArray';\nimport { useCounter } from '../hooks/useCounter';\nimport arrowIcon from '../assets/icons/right-arrow.png'\nimport rotateIcon from '../assets/icons/rotate.png'\nimport closeIcon from '../assets/icons/close.png'\nimport { Button } from './Button';\n\n\n\n\n\nexport const PdfPreviewer = ({file,fileName,blobName,setFieldValue}) => {\n    pdfjsLib.GlobalWorkerOptions.workerSrc = pdfjsWorker;\n    /*states*/\n    const [pdfDoc, setpdfDoc] = useState(null)\n    //change page of document to render\n    const [counter,prevPage,nextPage,,setPages]=useCounter({min:1,max:1,initial:1}) \n    //change orientacion of page\n    const[rotate,,nextRotation]=useCounter({min:0,max:3,initial:0})  \n    const {count:currentPage}=counter\n    const {count:currentRotation}=rotate\n    /*flag to trigger render only when ends other render*/\n    const isRendering=useRef(false)\n    /*DOM references to fit pdf size in container*/\n    const container = useRef(null)\n    const canvasRef=useRef()\n    /*store number of compenent renders*/\n    const renderizados = useRef(0)\n    \n    const handleClosePreview=()=>{\n        //set a the value of pdf file to null, this will close preview\n        //and user can choose other file in case he select a incorrect\n        setFieldValue(fileName,null)\n        setFieldValue(blobName,null)\n    }\n    const handleConvertCanvasToBlob=()=>{\n        canvasRef.current.toBlob(blob=>{\n            setFieldValue(blobName,blob)\n        })\n    }\n\n   //in first render will load pdf\n    useEffect(() => {\n        const getPdf =async(file) =>{\n            const buffer=await fileToBufferArray(file)\n            const pdf= await pdfjsLib.getDocument(buffer).promise\n            const {numPages}=pdf\n            setpdfDoc(pdf)\n            setPages(numPages)\n        }\n        getPdf(file);\n    },[file])\n\n    //when chenges pdf, page or orientation will trigger a render \n   useEffect(() => {\n        const renderPage=async()=>{\n            isRendering.current=true\n            //getting size of current container\n            const {width,height}=container.current.getBoundingClientRect()   \n            const containerSize={width,height}\n            //getting page for render\n            const  docPage= await pdfDoc.getPage(currentPage)\n            //re-scale page to fit in current container\n            const originalScale=1\n            const viewport=docPage.getViewport({scale:originalScale})\n            //scale depends if rotations is landscape or vertical\n            const scale=currentRotation%2?\n                Math.min(containerSize.width/viewport.height,containerSize.height/viewport.width):    \n                Math.min(containerSize.height/viewport.height,containerSize.width/viewport.width)\n            const scaledViewport=docPage.getViewport({scale:scale,rotation:currentRotation*90})\n            //prepating canvas \n            const context=canvasRef.current.getContext('2d')\n            canvasRef.current.height = scaledViewport.height;\n            canvasRef.current.width = scaledViewport.width;\n            //rendering page \n            const renderContext = {canvasContext: context,viewport: scaledViewport}\n            await docPage.render(renderContext).promise\n            isRendering.current=false\n        }\n        //if pdf is ready and other renders task has ended, then render\n        pdfDoc&&!isRendering.current&&renderPage()\n   },[currentPage,pdfDoc,currentRotation])\n    \n    \n    console.log(renderizados.current)\n    renderizados.current=renderizados.current+1\n    \n    return( \n        <div className=\"w-full \">\n            <div  \n                ref={container} \n                name={fileName} \n                className={`border-4 border-dashed outline-none border-pink-300 rounded-xl flex justify-center items-center h-60 mb-4 bg-pink-50 relative`}\n            >\n                {\n                    !pdfDoc? \n                        <h1>cargando</h1>: \n                        <div>\n                            <canvas ref={canvasRef} />\n                            <div className=\"space-x-4 flex-row absolute bottom-0 right-0 left-0\">\n                                <Button onClick={prevPage}>\n                                    <img src={arrowIcon} alt=\"prev icon\" className=\"w-6 transform rotate-180\" /> \n                                </Button>\n                                <Button onClick={nextPage}>\n                                    <img src={arrowIcon} alt=\"next icon\" className=\"w-6\" /> \n                                </Button>\n                                <Button onClick={nextRotation}>\n                                    <img src={rotateIcon} alt=\"rotate icon\" className=\"w-6\" /> \n                                </Button>\n                                \n                            </div>\n                            <button onClick={handleClosePreview} className=\"absolute right-2 top-2\">\n                                    <img src={closeIcon} alt=\"close icon\" className=\"w-6\" /> \n                            </button>\n                        </div>\n                            \n                }\n            </div>\n            {\n                pdfDoc&&\n                    <div className=\"static\">\n                        {/* <div className=\"space-x-4 flex-row absolute bottom-0 right-0 left-0\">\n                            <Button onClick={prevPage}>\n                                <img src={arrowIcon} alt=\"prev icon\" className=\"w-6 transform rotate-180\" /> \n                            </Button>\n                            <Button onClick={nextPage}>\n                                <img src={arrowIcon} alt=\"next icon\" className=\"w-6\" /> \n                            </Button>\n                            <Button onClick={nextRotation}>\n                                <img src={rotateIcon} alt=\"rotate icon\" className=\"w-6\" /> \n                            </Button>\n                            \n                        </div>\n                        <button onClick={handleClosePreview} className=\"absolute right-2 top-2\">\n                                <img src={closeIcon} alt=\"close icon\" className=\"w-6\" /> \n                        </button> */}\n                        <Button onClick={handleConvertCanvasToBlob}>\n                            Elegir esta vista previa\n                        </Button>\n                    </div>\n            }\n        </div>\n    )\n}\n","/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/Label.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/helper/validationSchemas/schemaDidactico.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/WarningIcon.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/helper/fileToBufferArray.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/components/Button.js",[],"/home/ivan/Documents/web/proyecto-didacticos/frontend-didacticos/src/hooks/useCounter.js",[],{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","replacedBy":"78"},{"ruleId":"79","severity":1,"message":"80","line":55,"column":7,"nodeType":"81","endLine":55,"endColumn":13,"suggestions":"82"},"no-native-reassign",["83"],"no-negated-in-lhs",["84"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'setPages'. Either include it or remove the dependency array.","ArrayExpression",["85"],"no-global-assign","no-unsafe-negation",{"desc":"86","fix":"87"},"Update the dependencies array to be: [file, setPages]",{"range":"88","text":"89"},[2022,2028],"[file, setPages]"]